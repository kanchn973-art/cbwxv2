const _0x2b30b1=_0x2c1b;(function($,e){let x=_0x2c1b,t=$();for(;;)try{let n=-parseInt(x(596))/1+parseInt(x(505))/2+parseInt(x(565))/3+-parseInt(x(501))/4+-parseInt(x(553))/5+parseInt(x(524))/6+-parseInt(x(506))/7;if(115208===n)break;t.push(t.shift())}catch(r){t.push(t.shift())}})(_0x175c,115208),console[_0x2b30b1(570)]=function(){},console[_0x2b30b1(521)]=function(){},console[_0x2b30b1(556)]=function(){},console[_0x2b30b1(595)]=function(){};const baseurl=_0x2b30b1(516);function toggleLoader($,e){let x=_0x2b30b1,t=document.getElementById($);e?(t.classList.add(x(495)),t.innerHTML="<span>"+t.textContent+'</span><div class="loader"></div>',t[x(508)]=!0):(t[x(581)][x(591)](x(495)),t.innerHTML=t[x(585)]("span")?t[x(585)](x(538))[x(564)]:x(588),t[x(508)]=!1)}function showForm($){let e=_0x2b30b1;document.querySelectorAll(e(519)).forEach(x=>{let t=e;x.classList[t(592)](t(568),x.id!==$),x.classList[t(592)]("show",x.id===$)}),document[e(546)](e(541))[e(552)]($=>{let x=e;$[x(564)]="",$[x(536)][x(580)]="none"})}function isValidEmail($){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/[_0x2b30b1(577)]($)}async function register(){let $=_0x2b30b1,e=document[$(512)]("reg-username")[$(572)][$(574)](),x=document[$(512)]($(500)).value[$(574)](),t=document[$(512)]($(561))[$(572)],n=document.getElementById($(594)),r=document[$(512)]($(589)),o=document[$(512)]($(578))[$(572)];if(n[$(564)]="",r.textContent="",n.style[$(580)]="none",r[$(536)][$(580)]=$(513),!e){n.textContent="Username is required.",n[$(536)][$(580)]=$(499);return}if(!isValidEmail(x)){n[$(564)]=$(535),n[$(536)][$(580)]=$(499);return}if(t.length<6){n.textContent="Password must be at least 6 characters.",n[$(536)][$(580)]="block";return}toggleLoader($(544),!0);try{let a=await fetch(baseurl+$(579),{method:$(583),headers:{"Content-Type":$(587)},body:JSON[$(551)]({username:e,email:x,password:t,referralCode:o})}),s=await a[$(550)]();if(a.ok)r[$(564)]=$(515),r[$(536)][$(580)]="block",toggleForms();else throw Error(s[$(498)]||"Error occurred. Please try again.")}catch(l){n.textContent=l.message,n[$(536)][$(580)]=$(499)}finally{toggleLoader($(544),!1)}}function toggleForms(){showForm(_0x2b30b1(517))}function handlePaste($){let e=_0x2b30b1,x=$[e(593)][e(554)](e(555))[e(574)]();6===x.length&&(document[e(546)](e(530))[e(552)](($,t)=>{let n=e;$[n(572)]=x[t]||""}),document[e(512)](e(531))[e(548)]())}function handleInput($){let{target:e,target:{nextElementSibling:x,previousElementSibling:t}}=$;e.value&&x&&x.focus(),!e.value&&t&&t[_0x2b30b1(548)]()}function handleBackspace($){let e=_0x2b30b1;e(563)===$.key&&!$.target[e(572)]&&$[e(537)][e(522)]&&$[e(537)][e(522)].focus()}async function verifyOTP(){let $=_0x2b30b1,e=Array[$(576)](document[$(546)]($(530)))[$(542)](e=>e.value[$(574)]()).join(""),x=document[$(512)]($(525)),t=document[$(512)]($(540)),n=document[$(512)]($(500)).value[$(574)]();if(x[$(564)]="",t.textContent="",x[$(536)][$(580)]=$(513),t.style.display=$(513),6!==e.length){x[$(564)]="OTP must be 6 digits.",x.style.display=$(499);return}try{let r=await fetch(baseurl+"/verify-otp",{method:$(583),headers:{"Content-Type":$(587)},body:JSON[$(551)]({email:n,otp:e})}),o=await r[$(550)]();if(r.ok)t.textContent=$(584),t[$(536)][$(580)]="block",setTimeout(()=>showForm($(566)),2e3);else throw Error(o.message||$(504))}catch(a){x[$(564)]=a.message,x[$(536)].display="block",document[$(546)]($(530))[$(552)](e=>e[$(572)]=""),document[$(512)]("otp-1")[$(548)]()}}function _0x2c1b($,e){let x=_0x175c();return(_0x2c1b=function($,e){return x[$-=495]})($,e)}document[_0x2b30b1(546)](_0x2b30b1(530))[_0x2b30b1(552)]($=>{let e=_0x2b30b1;$[e(511)](e(575),handlePaste),$.addEventListener(e(569),handleInput),$[e(511)](e(549),handleBackspace)});let resendTimer;function _0x175c(){let $=["otp-6","forgot-email","Login successful! Redirecting...","Failed to send reset link.","Invalid email format.","style","target","span","reset-button","otp-success",".auth-error, .auth-success","map","login-email","register-button","login-password","querySelectorAll","floor","focus","keydown","json","stringify","forEach","594260gpqmVm","getData","text","error","/request-password-reset","resend-timer",";path=/;secure;SameSite=Lax","getTime","reg-password","User does not exist. Please check your email or register.","Backspace","textContent","376530usyPig","login-form","login-button","hidden","input","log","Email is required to resend OTP.","value","get","trim","paste","from","test","referral-code","/register","display","classList","login-error","POST","OTP verified successfully! Redirecting to login...","querySelector","setItem","application/json","Submit","register-success","padStart","remove","toggle","clipboardData","register-error","info","34829qzxtKl","login-success","Invalid credentials","search","loading","/login","resend-otp","message","block","reg-email","140880ljaeEo","href","referral","Invalid OTP.","141562FkDtay","710185AfKlSr","include","disabled","An unexpected error occurred. Please try again.","Enter a valid email.","addEventListener","getElementById","none","preventDefault","Registration successful! Check your email for OTP.","https://backcifbwerwix.onrender.com","otp-form","reset-success",".auth-container","auth_token","warn","previousElementSibling","Password reset link sent! Check your email.","1255638ecQoWR","otp-error","Failed to resend OTP.","User not found","toUTCString","Resend OTP",".otp-input"];return(_0x175c=function(){return $})()}function startResendTimer(){let $=_0x2b30b1,e=document[$(512)]($(497)),x=document[$(512)]($(558));e.disabled=!0;let t=120;resendTimer=setInterval(()=>{let n=$,r=Math[n(547)](t/60),o=t%60;x[n(564)]=r+":"+o.toString()[n(590)](2,"0"),--t<0&&(clearInterval(resendTimer),x[n(564)]=n(529),e[n(508)]=!1)},1e3)}async function resendOTP(){let $=_0x2b30b1,e=document[$(512)]($(500))[$(572)][$(574)](),x=document[$(512)]("otp-error"),t=document[$(512)]($(540));if(!e){x[$(564)]=$(571),x[$(536)].display="block";return}try{let n=await fetch(baseurl+"/resend-otp",{method:$(583),headers:{"Content-Type":$(587)},body:JSON[$(551)]({email:e})}),r=await n[$(550)]();if(n.ok)t[$(564)]="OTP resent successfully.",t[$(536)].display=$(499),startResendTimer();else throw Error(r[$(498)]||$(526))}catch(o){x[$(564)]=o[$(498)],x.style[$(580)]=$(499)}}function setCookie($,e,x){let t=_0x2b30b1,n=new Date;n.setTime(n[t(560)]()+864e5*x);let r="expires="+n[t(528)]();document.cookie=$+"="+e+";"+r+t(559)}async function login(){let $=_0x2b30b1,e=document[$(512)]($(543))[$(572)].trim(),x=document[$(512)]($(545))[$(572)],t=document.getElementById($(582)),n=document[$(512)]($(597));if(t.textContent="",n[$(564)]="",t[$(536)][$(580)]="none",n.style[$(580)]=$(513),!isValidEmail(e)){t[$(564)]="Invalid email format.",t[$(536)].display=$(499);return}toggleLoader($(567),!0);try{let r=await fetch(baseurl+$(496),{method:"POST",headers:{"Content-Type":$(587)},body:JSON[$(551)]({email:e,password:x}),credentials:$(507)}),o=await r[$(550)]();if(r.ok){n[$(564)]=$(533),n[$(536)][$(580)]=$(499);let a=o.token;setCookie($(520),a,30),localStorage[$(586)]("userSession",JSON[$(551)]({email:e,token:a})),setTimeout(()=>{let e=$;window.location[e(502)]="home.html"},1500)}else $(598)===o.message?t[$(564)]="Invalid credentials. Please check your email and password.":$(527)===o[$(498)]?t[$(564)]=$(562):t[$(564)]=o[$(498)]||$(509)}catch(s){t[$(564)]=s[$(498)],t[$(536)][$(580)]=$(499)}finally{toggleLoader($(567),!1)}}async function resetPassword($){let e=_0x2b30b1;$[e(514)]();let x=document[e(512)](e(532))[e(572)][e(574)](),t=document[e(512)]("reset-error"),n=document.getElementById(e(518));if(!isValidEmail(x)){t[e(564)]=e(510),t[e(536)].display=e(499);return}toggleLoader("reset-button",!0);try{let r=await fetch(baseurl+e(557),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON[e(551)]({email:x})}),o=await r.json();if(r.ok)n[e(564)]=e(523),n[e(536)][e(580)]=e(499);else throw Error(o[e(498)]||e(534))}catch(a){t.textContent=a[e(498)],t.style[e(580)]="block"}finally{toggleLoader(e(539),!1)}}window.onload=()=>{let $=_0x2b30b1,e=new URLSearchParams(window.location[$(599)])[$(573)]($(503));e&&(document[$(512)]($(578))[$(572)]=e)};
